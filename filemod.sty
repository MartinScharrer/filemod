\def\filemodparse#1{%
    \expandafter\filemod@parse\pdffilemoddate{#1}\relax
}
\def\filemod@parse#1\relax{%
    \ifx\relax#1\relax
        \expandafter\filemodnotexists
    \else
        \expandafter\filemod@parse@#1\relax
    \fi
}
\def\filemodnotexists{%
    \filemodhandledate{0000}{00}{00}%
    \filemodhandletime{00}{00}{00}%
    \filemodhandletz{Z}%
}
\begingroup
\@makeother\D
\@makeother:
\gdef\filemod@parse@D:#1#2#3#4#5#6#7#8#9\relax{%
    \filemodhandledate{#1#2#3#4}{#5#6}{#7#8}%
    \filemod@parse@time#9\relax
}
\endgroup
\def\filemod@parse@time#1#2#3#4#5#6#7\relax{%
    \filemodhandletime{#1#2}{#3#4}{#5#6}%
    \filemodhandletz{#7}%
}

\let\filemodhandledate\empty
\let\filemodhandletime\empty
\let\filemodhandletz\empty

\def\filemodgetnum{\filemodcall\filemod@getnum}

\def\filemodprint{\filemodcall\thefilemod}
\def\filemodprintdate{\filemodcall\the@filemoddate}
\def\filemodprinttime{\filemodcall\the@filemodtime}

\def\thefilemod#1#2#3#4#5#6#7{%
    \thefilemoddate{#1}{#2}{#3}%
    \space
    \thefilemodtime{#4}{#5}{#6}{#7}%
}
\def\thefilemoddate#1#2#3{%
    #1/#2/#3%
}
\def\thefilemodtime#1#2#3{%
    #1:#2:#3%
}
\def\the@filemoddate#1#2#3#4#5#6#7{%
    \thefilemoddate{#1}{#2}{#3}%
}
\def\the@filemodtime#1#2#3{%
    \thefilemodtime
}


\def\filemodcall#1#2{%
    \begingroup
    \def\@tempa{#1}%
    \let\filemodhandledate\empty
    \let\filemodhandletime\empty
    \let\filemodhandletz\empty
    \edef\@tempb{\filemodparse{#2}}%
    \expandafter\expandafter
    \expandafter\endgroup
    \expandafter\@tempa
    \@tempb
}

\def\filemod@getnum#1#2#3#4#5#6#7{%
    \def\filemoddate{#1#2#3}%
    \def\filemodtime{#4#5#6}%
    \def\filemodtz{#7}%
}

\newcommand\filemodcmp[1][1]{%
    \def\filemod@next{\filemodcmpresult}%
    \filemod@cmp{#1}%
}

\newcommand\Filemodcmp[1][1]{%
    \let\filemod@next\empty
    \filemod@cmp{#1}%
}

\def\filemod@cmp#1#2#3{%
    \filemodgetnum{#2}%
    \let\filemoddatea\filemoddate
    \let\filemodtimea\filemodtime
    \let\filemodtza\filemodtz
    \filemodgetnum{#3}%
    \ifcase0%
        \ifnum\filemoddate>\filemoddatea\space1\else
            \ifnum\filemoddate=\filemoddatea\space
                \ifnum\filemodtime>\filemodtimea\space1\else
                    \ifnum\filemoddate=\filemoddatea\space2\fi
                \fi
            \fi
        \fi
    \relax
       \ifnum#1=3\relax
          \def\filemodcmpresult##1##2##3{##1}%
       \else
          \let\filemodcmpresult\@firstoftwo
       \fi
    \or
       \ifnum#1=3\relax
          \def\filemodcmpresult##1##2##3{##2}%
       \else
          \let\filemodcmpresult\@secondoftwo
       \fi
    \else
       \ifcase#1\relax
         \let\filemodcmpresult\@gobbletwo
       \or
         \let\filemodcmpresult\@firstoftwo
       \or
         \let\filemodcmpresult\@secondoftwo
       \or
         \let\filemodcmpresult\@thirdofthree
       \else
         \@filemodcmp@error
       \fi
    \fi
    \filemod@next
}

\def\@filemodcmp@error{%
    \PackageError{filemod}{Invalid optional argument! Must be a number from 0-3.}{}%
}

